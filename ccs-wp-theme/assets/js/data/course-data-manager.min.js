!function(){"use strict";const e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;function a(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}function t(e){return e&&0!==e.length?a(e[0]):"other"}function o(e){if(!e)return"";if(e.includes("|")){const a=e.split("|").map((e=>e.trim())).filter((e=>e)),t=a.find((e=>e.includes("Care Certificate")));if(t)return t;const o=a.find((e=>e.includes("Skills for Care")));if(o)return o;return a.find((e=>e.includes("Skills for Health")))?"Skills for Health":a[0]}return e.includes("Skills for Health UK Core Skills Training Framework")?"Skills for Health":e}function r(e){const a=e.topicCategories||[],r=t(a);return{id:e.id,title:e.title,category:r,categoryName:a[0]||"Other",topicCategories:a,description:e.description,duration:e.duration+(e.hours?` (${e.hours})`:""),price:e.price,level:e.level,accreditation:o(e.accreditation||e.mappedTo||""),validFor:e.validFor||"Permanent",location:e.location,trainers:e.trainers||[],featured:e.featured||!1,learningOutcomes:e.learningOutcomes||[],whoShouldAttend:e.whoShouldAttend||e.whoCanJoin||"",topics:a,industrySectors:e.industrySectors||[]}}function i(){return window.CourseData&&window.CourseData.courses&&0!==window.CourseData.courses.length?window.CourseData.courses.map(r):(e&&console.warn("CourseData not available. Make sure courses-data.js is loaded before this script."),[])}let s=!1,n=!1;async function c(){if(!s&&!n){n=!0;try{const e=await fetch("assets/data/courses-database.json");if(e.ok){const a=await e.json();window.CourseData||(window.CourseData={}),window.CourseData.courseDatabase?Object.keys(a).forEach((e=>{window.CourseData.courseDatabase[e]?window.CourseData.courseDatabase[e]={...window.CourseData.courseDatabase[e],...a[e]}:window.CourseData.courseDatabase[e]=a[e]})):window.CourseData.courseDatabase=a,s=!0}}catch(a){e&&console.warn("Could not load courses-database.json:",a)}finally{n=!1}}}function l(e){if(!window.CourseData||!window.CourseData.courseDatabase)return c(),null;return window.CourseData.courseDatabase[e]||null}function u(){return{"core-care-skills":"fa-heart","emergency-first-aid":"fa-first-aid","medication-management":"fa-pills","safety-compliance":"fa-shield-alt","health-conditions-specialist-care":"fa-stethoscope","communication-workplace-culture":"fa-users","information-data-management":"fa-database","nutrition-hygiene":"fa-apple-alt","leadership-professional-development":"fa-user-tie",all:"fa-th-large"}}"undefined"!=typeof window&&c(),window.CourseDataManager={getCourses:i,getCourseById:function(e){return i().find((a=>a.id===e))||null},getCourseByTitle:l,getCoursesByCategory:function(e){const a=i();return"all"===e?a:a.filter((a=>a.category===e))},searchCourses:function(e){const a=i();if(!e||""===e.trim())return a;const t=e.toLowerCase();return a.filter((e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.topics.some((e=>e.toLowerCase().includes(t)))))},topicCategoryToKey:a,getPrimaryTopicCategory:t,mapUrlCategoryToKey:function(e){const a={"core-health-social-care":"core-care-skills","first-aid-emergency-response":"emergency-first-aid","specialist-health-awareness":"health-conditions-specialist-care","medication-clinical-skills":"medication-management","manual-handling-workplace-safety":"safety-compliance","safeguarding-protection":"safety-compliance",care:"core-care-skills","emergency-first-aid":"emergency-first-aid","specialist-care":"health-conditions-specialist-care",medication:"medication-management","health-safety":"safety-compliance",safeguarding:"safety-compliance","person-centred-care":"communication-workplace-culture","mental-health":"health-conditions-specialist-care"};return a[e]?a[e]:e||"all"},getCategoryConfig:function(){const e=window.CourseData?.courses||[],t=new Set;e.forEach((e=>{e.topicCategories&&Array.isArray(e.topicCategories)&&e.topicCategories.forEach((e=>t.add(e)))}));const o={"Core Care Skills":{badgeColor:"course-badge-blue",shortName:"Core Care"},"Emergency & First Aid":{badgeColor:"course-badge-red",shortName:"First Aid"},"Medication Management":{badgeColor:"course-badge-purple",shortName:"Medication"},"Safety & Compliance":{badgeColor:"course-badge-orange",shortName:"Safety"},"Health Conditions & Specialist Care":{badgeColor:"course-badge-teal",shortName:"Specialist Health"},"Communication & Workplace Culture":{badgeColor:"course-badge-pink",shortName:"Communication"},"Information & Data Management":{badgeColor:"course-badge-amber",shortName:"Data & Records"},"Nutrition & Hygiene":{badgeColor:"course-badge-green",shortName:"Nutrition"},"Leadership & Professional Development":{badgeColor:"course-badge-indigo",shortName:"Leadership"}};return[{key:"all",title:"All Courses",shortName:"All",badgeColor:"course-badge-amber"},...Array.from(t).sort().map((e=>{const t=o[e]||{badgeColor:"course-badge-amber",shortName:e};return{key:a(e),title:e,shortName:t.shortName,badgeColor:t.badgeColor}}))]},getCategoryIconMap:u,getCategoryIconHtml:function(e,a=""){return`<i class="${`fas ${{"core-care-skills":"fa-heart","emergency-first-aid":"fa-first-aid","medication-management":"fa-pills","safety-compliance":"fa-shield-alt","health-conditions-specialist-care":"fa-stethoscope","communication-workplace-culture":"fa-users","information-data-management":"fa-database","nutrition-hygiene":"fa-apple-alt","leadership-professional-development":"fa-user-tie",all:"fa-th-large"}[e]||"fa-book"}${a?" "+a:""}`}" aria-hidden="true"></i>`},getDisplayCategories:function(){const e=window.CourseData?.courses||[],a=new Set;return e.forEach((e=>{e.topicCategories&&Array.isArray(e.topicCategories)&&e.topicCategories.forEach((e=>a.add(e)))})),["All Courses",...Array.from(a).sort()]},transformCourseForDisplay:r,simplifyAccreditation:o,mergeCourseDataForCalendar:function(e){c();const a=l(e.title);let t=null;if(window.CourseData&&window.CourseData.courses&&Array.isArray(window.CourseData.courses)&&(t=window.CourseData.courses.find((a=>a.title===e.title))),a){let r=`£${a.price}`;e.price&&(r="string"==typeof e.price?e.price:`£${e.price}`);let i=null;i=t&&t.topicCategories&&Array.isArray(t.topicCategories)?t.topicCategories:a.category?[a.category]:e.topicCategories&&Array.isArray(e.topicCategories)?e.topicCategories:[];return{...e,description:a.description,accreditation:o(a.accreditation||a.mappedTo||""),trainers:a.trainers,learningOutcomes:a.learningOutcomes,image:a.image||e.image,price:r,duration:a.duration||e.duration,level:a.level||e.level,category:a.category||e.category,categoryName:a.category||i&&i[0]||e.category,topicCategories:i,location:"Maidstone Studios",requirements:a.requirements,accessibilityInfo:a.accessibilityInfo,whoShouldAttend:a.whoShouldAttend||e.whoShouldAttend,spotsLeft:void 0!==e.spotsLeft?e.spotsLeft:12,date:e.date,originalDate:e.date}}let r=e.topicCategories||[];return r&&0!==r.length||(t&&t.topicCategories&&Array.isArray(t.topicCategories)?r=t.topicCategories:e.category&&(r=[e.category])),{...e,location:e.location||"Maidstone Studios",topicCategories:r}},getRawCourses:function(){return window.CourseData?.courses||[]},getRawCourseDatabase:function(){return window.CourseData?.courseDatabase||{}}}}();