!function(){"use strict";const e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;if(!window.CourseDataManager)return void(e&&console.error("CourseDataManager not loaded. Make sure course-data-manager.js is loaded before courses.js"));function t(){return window.CourseDataManager.getCourses()}function s(e){return window.CourseDataManager.mapUrlCategoryToKey(e)}const o=window.CourseDataManager.getCategoryConfig(),a=window.CourseDataManager.getCategoryIconMap();let i=new Set,n="",c=null,r=!1;const _=document.getElementById("courses-grid"),d=document.getElementById("course-search"),l=document.getElementById("clear-search"),p=document.getElementById("results-count"),m=document.getElementById("results-text"),g=document.getElementById("courses-empty-state"),u=document.getElementById("courses-cta-section"),S=document.getElementById("active-filters"),h=document.getElementById("active-filters-list"),U=document.getElementById("clear-all-filters"),w=document.getElementById("clear-filters-empty"),b=document.getElementById("search-results-heading"),C=document.getElementById("search-query-display"),y=document.getElementById("clear-search-results");function E(){let t=0;!function o(){if(window.CourseDataManager&&window.CourseData&&window.CourseData.courses){const e=new URLSearchParams(window.location.search),t=e.getAll("category");t.length>0?(i=new Set(t.map((e=>s(e)))),setTimeout((()=>{T()}),0)):i=new Set(["all"]);const o=e.get("search");o&&d&&(n=o.trim(),d.value=n,l&&(l.style.display=n?"block":"none")),k(),B(),H(),R()}else if(t<50)t++,setTimeout(o,100);else{e&&console.warn("CourseData not loaded after timeout, using fallback data");const t=new URLSearchParams(window.location.search),o=t.getAll("category");o.length>0?(i=new Set(o.map((e=>s(e)))),T()):i=new Set(["all"]);const a=t.get("search");a&&d&&(n=a.trim(),d.value=n,l&&(l.style.display=n?"block":"none")),k(),B(),H(),R()}}()}function k(){d&&d.addEventListener("input",f),l&&l.addEventListener("click",L),y&&y.addEventListener("click",(()=>{L();const e=new URL(window.location);e.searchParams.delete("search"),window.history.replaceState({},"",e)}));const e=document.getElementById("mobile-filter-toggle"),t=document.getElementById("courses-filter-buttons");e&&t&&e.addEventListener("click",(()=>{const s="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!s),t.setAttribute("aria-hidden",s),t.style.display=s?"none":"flex"}));document.querySelectorAll(".courses-filter-btn").forEach((s=>{s.addEventListener("click",(()=>{if(A(s.getAttribute("data-category")),e&&t){"none"!==window.getComputedStyle(e).display&&(e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true"),t.style.display="none")}}))})),U&&U.addEventListener("click",I),w&&w.addEventListener("click",I)}function f(e){const t=e.target.value.trim();l.style.display=t?"block":"none",c&&clearTimeout(c),M(!0),c=setTimeout((()=>{n=t,H(),N(),M(!1)}),300)}function L(){c&&(clearTimeout(c),c=null),n="",d.value="",l.style.display="none",M(!1),i=new Set(["all"]),T(),H(),N()}function M(e){r=e,_&&(e?_.classList.add("courses-grid-loading"):_.classList.remove("courses-grid-loading"))}function A(e){"all"===e?i.clear():(i.has(e)?i.delete(e):i.add(e),i.size>0&&i.delete("all")),0===i.size&&i.add("all"),T(),M(!0),setTimeout((()=>{H(),N(),M(!1);const e=document.createElement("div");e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.className="sr-only",e.textContent=`Showing ${document.getElementById("results-count")?.textContent||"0"} courses`,document.body.appendChild(e),setTimeout((()=>document.body.removeChild(e)),1e3)}),100);const t=new URL(window.location);t.searchParams.delete("category"),i.has("all")||i.forEach((e=>{t.searchParams.append("category",e)})),window.history.pushState({},"",t)}function T(){document.querySelectorAll(".courses-filter-btn").forEach((e=>{const t=e.getAttribute("data-category");let o=i.has(t);!o&&i.size>0&&(o=Array.from(i).some((e=>s(t)===s(e)))),o?(e.classList.add("courses-filter-btn-active"),e.setAttribute("aria-pressed","true")):(e.classList.remove("courses-filter-btn-active"),e.setAttribute("aria-pressed","false"))}))}function I(){c&&(clearTimeout(c),c=null),i.clear(),i.add("all"),n="",d.value="",l.style.display="none",T(),M(!0),setTimeout((()=>{H(),N(),M(!1)}),100);const e=new URL(window.location);e.searchParams.delete("category"),window.history.pushState({},"",e)}function B(){const e=t(),s={all:e.length};o.forEach((t=>{"all"!==t.key&&(s[t.key]=e.filter((e=>e.category===t.key||!!e.topicCategories&&e.topicCategories.some((e=>window.CourseDataManager.topicCategoryToKey(e)===t.key)))).length)})),Object.keys(s).forEach((e=>{const t=document.getElementById(`count-${e}`);t&&(t.textContent=`(${s[e]})`)}))}function H(){const e=t().filter((e=>{let t=i.has("all");if(!t&&i.size>0){const s=e.topicCategories||[];if(0===s.length)return!1;t=Array.from(i).some((e=>s.some((t=>(window.CourseDataManager&&"function"==typeof window.CourseDataManager.topicCategoryToKey?window.CourseDataManager.topicCategoryToKey(t):t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""))===e))))}const s=""===n||e.title.toLowerCase().includes(n.toLowerCase())||e.description.toLowerCase().includes(n.toLowerCase());return t&&s})),s=e.length,c=_&&null!==_.querySelector(".course-card"),r=i.size>0&&!i.has("all")||""!==n.trim(),d=c?_.querySelectorAll(".course-card").length:0,l=i.has("all")&&!r&&s!==d;if(b&&C&&(n&&""!==n.trim()?(b.style.display="block",C.textContent=`"${n}"`):b.style.display="none"),p&&(p.textContent=s),m&&(n&&""!==n.trim()?m.textContent=` result${1===s?"":"s"} for "${n}"`:m.textContent=1===s?" course":" courses"),0===s){if(g){g.style.display="block";const e=document.getElementById("courses-empty-suggestions");if(e){const t=o.filter((e=>"all"!==e.key)).sort(((e,t)=>{const s=parseInt(document.getElementById(`count-${e.key}`)?.textContent.replace(/[()]/g,"")||"0");return parseInt(document.getElementById(`count-${t.key}`)?.textContent.replace(/[()]/g,"")||"0")-s})).slice(0,3);t.length>0?(e.innerHTML=`\n              <p class="courses-empty-suggestions-title">Popular Categories:</p>\n              <div class="courses-empty-suggestions-list">\n                ${t.map((e=>`\n                  <button class="courses-empty-suggestion-btn" data-category="${e.key}">\n                    ${e.title}\n                  </button>\n                `)).join("")}\n              </div>\n            `,e.querySelectorAll(".courses-empty-suggestion-btn").forEach((e=>{e.addEventListener("click",(()=>{A(e.getAttribute("data-category"))}))}))):e.innerHTML=""}}_&&(_.style.display="none",_.classList.remove("courses-grid-loading")),u&&(u.style.display="none")}else g&&(g.style.display="none"),_&&(_.style.display="grid",_.classList.remove("courses-grid-loading")),u&&(u.style.display="block");_&&(r||!c||l)&&(_.innerHTML=e.map((e=>{const t=e.topicCategories||[],s=t.length>0?t.map((e=>{const t=window.CourseDataManager&&"function"==typeof window.CourseDataManager.topicCategoryToKey?window.CourseDataManager.topicCategoryToKey(e):e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),s=o.find((e=>e.key===t)),i=`<i class="fas ${a[t]||"fa-book"} course-card-badge-icon" aria-hidden="true"></i>`;return`<span class="course-card-badge ${s?.badgeColor||"course-badge-amber"}">${i} ${s?.shortName||s?.title||e}</span>`})).join(""):(()=>{const t=o.find((t=>t.key===e.category)),s=`<i class="fas ${a[e.category]||"fa-book"} course-card-badge-icon" aria-hidden="true"></i>`;return`<span class="course-card-badge ${t?.badgeColor||"course-badge-amber"}">${s} ${t?.shortName||e.categoryName||t?.title||e.category}</span>`})(),i=function(e){const t={"Emergency First Aid at Work":["assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid05.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid06.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid07.webp"],"Emergency Paediatric First Aid":["assets/img/stock_photos/05_COURSE_THUMBNAILS/pediatric_first_aid01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/pediatric_first_aid02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_pediatric_first_aid01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_pediatric_first_aid02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_pediatric_first_aid03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_pediatric_first_aid04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_pediatric_first_aid05.webp"],"Adult Social Care Certificate":["assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate05.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate06.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate07.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate08.webp"],"Epilepsy & Emergency Medication":["assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy05.webp"],"Basic Life Support":["assets/img/stock_photos/05_COURSE_THUMBNAILS/basic_life_support01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/basic_life_support02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/basic_life_support03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/basic_life_support04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/basic_life_support05.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/basic_life_support06.webp"],"Moving & Handling":["assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling05.webp"],"Manual Handling":["assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling05.webp"],"Safeguarding Adults":["assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults05.webp"],"Medication Awareness":["assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training05.webp"],"Duty of Care":["assets/img/stock_photos/05_COURSE_THUMBNAILS/duty-of-care.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/duty-of-care2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/duty-of-care3.webp"],"Effective Communication":["assets/img/stock_photos/05_COURSE_THUMBNAILS/effective-communication.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/effective-communication2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/effective-communication3.webp"],"Equality, Diversity, Inclusion & Human Rights":["assets/img/stock_photos/05_COURSE_THUMBNAILS/equality-diversity-human-rights.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/equality-diversity-human-rights2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/equality-diversity-human-rights3.webp"],"Information Handling":["assets/img/stock_photos/05_COURSE_THUMBNAILS/data-and-records.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/data-and-records2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/data-and-records3.webp"],GDPR:["assets/img/stock_photos/05_COURSE_THUMBNAILS/data-and-records.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/data-and-records2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/data-and-records3.webp"],"Oral Health":["assets/img/stock_photos/05_COURSE_THUMBNAILS/oral-health2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/oral-health3.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/oral-health4.webp"],"Nutrition and Hydration":["assets/img/stock_photos/05_COURSE_THUMBNAILS/nutrition.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/nutrition2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/nutrition3.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/nutrition4.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/nutrition5.webp"],"Management & Leadership Skills (Level 2)":["assets/img/stock_photos/05_COURSE_THUMBNAILS/management-and-leadership.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/management-and-leadership2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/management-and-leadership3.webp"],"Management & Leadership Skills (Level 3)":["assets/img/stock_photos/05_COURSE_THUMBNAILS/management-and-leadership.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/management-and-leadership2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/management-and-leadership3.webp"],"Dignity Privacy & Respect":["assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate04.webp"],"Person-Centred Care":["assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate04.webp"],"The Role of a Care Worker & Personal Development":["assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate04.webp"],"First Aid at Work":["assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid05.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid06.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid07.webp"],"Paediatric First Aid":["assets/img/stock_photos/05_COURSE_THUMBNAILS/pediatric_first_aid01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/pediatric_first_aid02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_pediatric_first_aid01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_pediatric_first_aid02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_pediatric_first_aid03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_pediatric_first_aid04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_pediatric_first_aid05.webp"],Safeguarding:["assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults05.webp"],"Medication Competency & Management":["assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training05.webp"],"Moving & Positioning Theory":["assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling05.webp"],"Moving & Positioning inc. Hoist":["assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling05.webp"]};if(e.title&&t[e.title]){const s=t[e.title];return s[(e.id||e.title||"").toString().split("").reduce(((e,t)=>e+t.charCodeAt(0)),0)%s.length]}const s={"Core Care Skills":["assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate04.webp"],"Core Care":["assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate04.webp"],"Emergency & First Aid":["assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid05.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid06.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid07.webp"],"Emergency First Aid":["assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid05.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid06.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid07.webp"],"First Aid":["assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid05.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid06.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid07.webp"],"Medication Management":["assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training05.webp"],Medication:["assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/medication_awareness_training05.webp"],"Safety & Compliance":["assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling05.webp"],"Manual Handling":["assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/moving_and_handling05.webp"],"Health Conditions & Specialist Care":["assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy05.webp"],"Specialist Care":["assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy01.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy05.webp"],Safeguarding:["assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults02.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults03.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults04.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/safeguarding_adults05.webp"],"Communication & Workplace Culture":["assets/img/stock_photos/05_COURSE_THUMBNAILS/effective-communication.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/effective-communication2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/effective-communication3.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/equality-diversity-human-rights.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/equality-diversity-human-rights2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/equality-diversity-human-rights3.webp"],"Information & Data Management":["assets/img/stock_photos/05_COURSE_THUMBNAILS/data-and-records.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/data-and-records2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/data-and-records3.webp"],"Leadership & Professional Development":["assets/img/stock_photos/05_COURSE_THUMBNAILS/management-and-leadership.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/management-and-leadership2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/management-and-leadership3.webp"],"Nutrition & Hygiene":["assets/img/stock_photos/05_COURSE_THUMBNAILS/nutrition.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/nutrition2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/nutrition3.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/nutrition4.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/nutrition5.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/oral-health2.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/oral-health3.webp","assets/img/stock_photos/05_COURSE_THUMBNAILS/oral-health4.webp"]},o=e.categoryName||e.category||e.topicCategories&&e.topicCategories[0];if(o&&s[o]){const t=s[o];return t[(e.id||e.title||"").toString().split("").reduce(((e,t)=>e+t.charCodeAt(0)),0)%t.length]}return"assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate01.webp"}(e),n=e.learningOutcomes&&e.learningOutcomes.length>0?`<ul class="course-modal-learning-outcomes">\n              ${e.learningOutcomes.map((e=>`<li>${e}</li>`)).join("")}\n            </ul>`:"",c=e.whoShouldAttend?`<div class="course-modal-who-should-attend">${e.whoShouldAttend}</div>`:"",r=function(e){const t=e.split("/"),s=t.pop(),o=t.join("/"),a=s.match(/^(.+?)\.(webp|jpg|png)$/);if(!a)return e;const i=a[1],n=a[2];return`${o}/${i}-400w.${n} 400w, ${o}/${i}-800w.${n} 800w, ${o}/${i}-1200w.${n} 1200w, ${o}/${i}-1600w.${n} 1600w`}(i),_=function(e){const t=e.split("/"),s=t.pop(),o=t.join("/"),a=s.match(/^(.+?)\.(webp|jpg|png)$/);return a?`${o}/${a[1]}-400w.${a[2]}`:e}(i);return`\n          <article class="course-card" data-course-id="${e.id}" data-booking-link="courses/${e.id}.html">\n            <div class="course-image-wrapper">\n            <img srcset="${r}"\n                 src="${_}"\n                 alt="${e.title}"\n                 class="course-image"\n                 loading="lazy"\n                 width="400"\n                 height="225"\n                 sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw">\n            </div>\n            <div class="course-card-header">\n              <div class="course-card-badge-wrapper">\n                ${s}\n              </div>\n              <h3 class="course-card-title">${e.title}</h3>\n              <p class="course-card-description">${e.description}</p>\n            </div>\n            <div class="course-card-content">\n              <div class="course-card-meta">\n                <div class="course-card-meta-item">\n                  <i class="fas fa-clock course-card-meta-icon" aria-hidden="true"></i>\n                  <span>${e.duration}</span>\n                </div>\n                <div class="course-card-meta-item">\n                  <i class="fas fa-trophy course-card-meta-icon" aria-hidden="true"></i>\n                  <span>${e.accreditation}</span>\n                </div>\n                <div class="course-card-meta-item">\n                  <i class="fas fa-chart-line course-card-meta-icon" aria-hidden="true"></i>\n                  <span>${e.level}</span>\n                </div>\n              </div>\n            </div>\n            <div class="course-card-footer">\n              <div class="course-card-price">\n                <p class="course-card-price-amount">From £${e.price}</p>\n                <p class="course-card-price-label">per person</p>\n              </div>\n              <button type="button" class="course-read-more-btn" aria-label="Read more about ${e.title}" data-course-id="${e.id}">\n                Read More\n                \x3c!-- Debug: course.id = ${e.id} --\x3e\n                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">\n                  <path d="M5 12h14M12 5l7 7-7 7"></path>\n                </svg>\n              </button>\n            </div>\n            <div class="course-full-content" style="display: none;" data-course-id="${e.id}" data-booking-link="courses/${e.id}.html">\n              <div class="course-full-description">${e.description}</div>\n              ${n?`<div class="course-full-learning-outcomes">${n}</div>`:""}\n              ${c?`<div class="course-full-who-should-attend">${c}</div>`:""}\n            </div>\n          </article>\n        `})).join(""))}function N(){const e=i.size>1&&!i.has("all");if(e||""!==n){if(S.style.display="block",h.innerHTML="",e&&Array.from(i).forEach((e=>{if("all"!==e){const t=o.find((t=>t.key===e)),s=document.createElement("span");s.className="active-filter-badge active-filter-badge-category",s.innerHTML=`\n              <span>${t?.shortName||t?.title||e}</span>\n              <button class="active-filter-remove" aria-label="Remove ${t?.shortName||t?.title||e} filter" data-filter="category" data-category="${e}">\n                <span aria-hidden="true">✕</span>\n              </button>\n            `,s.querySelector(".active-filter-remove").addEventListener("click",(()=>{A(e)})),h.appendChild(s)}})),""!==n){const e=document.createElement("span");e.className="active-filter-badge active-filter-badge-search",e.innerHTML=`\n          <span>Search: "${n.length>30?n.substring(0,30)+"...":n}"</span>\n          <button class="active-filter-remove" aria-label="Clear search filter" data-filter="search">\n            <span aria-hidden="true">✕</span>\n          </button>\n        `,e.querySelector(".active-filter-remove").addEventListener("click",L),h.appendChild(e)}const t=document.createElement("button");t.className="copy-filter-url-btn",t.innerHTML='<i class="fas fa-link" aria-hidden="true"></i> Copy URL',t.setAttribute("aria-label","Copy filtered URL to clipboard"),t.addEventListener("click",(()=>{const e=new URL(window.location);e.searchParams.delete("category"),i.has("all")||i.forEach((t=>{e.searchParams.append("category",t)})),n?e.searchParams.set("search",n):e.searchParams.delete("search"),navigator.clipboard.writeText(e.toString()).then((()=>{const e=t.innerHTML;t.innerHTML='<i class="fas fa-check" aria-hidden="true"></i> Copied!',t.classList.add("copied"),setTimeout((()=>{t.innerHTML=e,t.classList.remove("copied")}),2e3)})).catch((()=>{const s=document.createElement("textarea");s.value=e.toString(),document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s);const o=t.innerHTML;t.innerHTML='<i class="fas fa-check" aria-hidden="true"></i> Copied!',t.classList.add("copied"),setTimeout((()=>{t.innerHTML=o,t.classList.remove("copied")}),2e3)}))})),h.appendChild(t),"all"!==selectedCategory&&""!==n?U.style.display="inline-block":U.style.display="none"}else S.style.display="none"}function R(){document.addEventListener("keydown",(e=>{"/"===e.key&&"INPUT"!==document.activeElement?.tagName&&"TEXTAREA"!==document.activeElement?.tagName&&(e.preventDefault(),d&&d.focus())}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",E):E()}(),function(){"use strict";const e=document.getElementById("course-modal"),t=document.getElementById("course-modal-content");let s=null;function o(o){const i=o.getAttribute("data-course-id"),c=o.querySelector(".course-full-content");if(!c)return void(isDevelopment&&console.warn("Course full content not found"));const r=o.querySelector(".course-card-title")?.textContent||"",_=o.querySelector(".course-card-badge")?.textContent||"",d=o.querySelector(".course-card-description")?.textContent||"",l=o.querySelector(".course-card-meta-item:first-child span")?.textContent||"",p=o.querySelector(".course-card-meta-item:nth-child(2) span")?.textContent||"",m=o.querySelector(".course-card-meta-item:last-child span")?.textContent||"",g=o.querySelector(".course-card-price-amount")?.textContent||"",u=c.querySelector(".course-full-description")?.innerHTML||d,S=c.querySelector(".course-full-learning-outcomes")?.innerHTML||"",h=c.querySelector(".course-full-who-should-attend")?.innerHTML||"";s=document.activeElement;let U=`\n      <div class="course-modal-header">\n        <h2 id="course-modal-title" class="course-modal-title">${r}</h2>\n        <p class="course-modal-category">${_}</p>\n        <div class="course-modal-meta">\n          <div class="course-modal-meta-item">\n            <i class="fas fa-clock" aria-hidden="true"></i>\n            <span>${l}</span>\n          </div>\n          <div class="course-modal-meta-item">\n            <i class="fas fa-trophy" aria-hidden="true"></i>\n            <span>${p}</span>\n          </div>\n          <div class="course-modal-meta-item">\n            <i class="fas fa-chart-line" aria-hidden="true"></i>\n            <span>${m}</span>\n          </div>\n          <div class="course-modal-meta-item">\n            <i class="fas fa-pound-sign" aria-hidden="true"></i>\n            <span>${g} per person</span>\n          </div>\n        </div>\n      </div>\n      <div class="course-modal-description">\n        <p>${u}</p>\n      </div>\n    `;S&&(U+=`\n        <div class="course-modal-section">\n          <h3 class="course-modal-section-title">Learning Outcomes</h3>\n          ${S}\n        </div>\n      `),h&&(U+=`\n        <div class="course-modal-section">\n          <h3 class="course-modal-section-title">Who Should Attend</h3>\n          ${h}\n        </div>\n      `);o.getAttribute("data-booking-link")||c.getAttribute("data-booking-link")||o.getAttribute("data-course-id");U+=`\n      <div class="course-modal-actions">\n        <button type="button" class="btn btn-primary course-modal-book-btn" data-course-title="${r}" data-course-id="${i}">\n          Book Now\n          <span aria-hidden="true">→</span>\n        </button>\n      </div>\n    `,t.innerHTML=U,e.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const w=t.querySelector(".course-modal-book-btn");w&&w.addEventListener("click",(function(e){e.preventDefault();n(this.getAttribute("data-course-title")||r),a()}));const b=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');b.length>0&&b[0].focus();const C=function(e){"Escape"===e.key&&(a(),document.removeEventListener("keydown",C))};document.addEventListener("keydown",C)}function a(){e.setAttribute("aria-hidden","true"),document.body.style.overflow="",s&&(s.focus(),s=null)}document.addEventListener("click",(function(e){const t=e.target.closest(".course-read-more-btn");if(t){e.preventDefault();const s=t.closest(".course-card");s&&o(s)}}));const i=document.querySelector(".course-modal-close");function n(e){const t=document.getElementById("course-enquiry-modal"),s=document.getElementById("enquiry-course");t?(s&&(s.value=e||"Course Enquiry"),t.classList.add("modal-active"),t.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",setTimeout((()=>{const e=document.getElementById("enquiry-name");e&&e.focus()}),100)):console.error("Enquiry modal not found")}function c(){const e=document.getElementById("course-enquiry-modal"),t=document.getElementById("course-enquiry-form");e&&(e.classList.remove("modal-active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",t&&t.reset())}i&&i.addEventListener("click",a),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("course-enquiry-form");e&&e.addEventListener("submit",(function(t){t.preventDefault();const s=new FormData(e),o=s.get("course")||"Course Enquiry",a=s.get("name"),i=s.get("email"),n=s.get("phone"),r=s.get("message"),_="mailto:enquiries@continuitytrainingacademy.co.uk?subject="+encodeURIComponent("Course Booking Enquiry: "+o)+"&body="+encodeURIComponent("New course booking enquiry:\n\nCourse: "+o+"\nName: "+a+"\nEmail: "+i+"\nPhone: "+n+"\nMessage: "+r+"\n\nPlease contact them to discuss their training needs.");window.showThankYouModal?(window.showThankYouModal("Thanks for your booking enquiry! We've received it and will be in touch soon.",{nextSteps:"We'll send you booking details via email shortly."}),c(),setTimeout((function(){window.location.href=_}),300)):(alert("Thank you for your enquiry! We'll get back to you soon."),window.location.href=_,c()),e.reset()})),document.addEventListener("keydown",(function(e){if("Escape"===e.key){const e=document.getElementById("course-enquiry-modal");e&&e.classList.contains("modal-active")&&c()}}))})),window.openCourseModal=o,window.closeCourseModal=a,window.openEnquiryModal=n,window.closeEnquiryModal=c}();