!function(){"use strict";const e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;async function t(){const t=document.querySelector(".upcoming-courses .courses-grid");if(!t)return void(e&&console.warn("Homepage upcoming courses grid not found"));if(null!==t.querySelector(".event-card"))e&&console.log("Server-rendered content detected, skipping initial render");else try{const a=await async function(){const t=e=>{try{const t=new Date(e),n=new Date;return n.setHours(0,0,0,0),t.setHours(0,0,0,0),t>=n}catch(e){return!1}};let r=[];if(window.ScheduledCourses&&Array.isArray(window.ScheduledCourses))r=window.ScheduledCourses;else try{const e=await fetch("assets/data/scheduled-courses.json");e.ok&&(r=await e.json())}catch(t){e&&console.error("Error loading scheduled courses:",t)}const a=r.map(n).filter((e=>e.date&&t(e.date))).sort(((e,t)=>new Date(e.date)-new Date(t.date)));return a}();if(0===a.length)return void(e&&console.warn("No upcoming events found"));!function(e,t){t.innerHTML=e.map((e=>{const t=function(e){if(e.image){if(!/\/\d+\.(webp|jpg|png)$/.test(e.image)){if(e.image.includes("05_COURSE_THUMBNAILS"))return e.image}}const t={"Emergency First Aid at Work":"assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid04.webp","Emergency Paediatric First Aid":"assets/img/stock_photos/05_COURSE_THUMBNAILS/pediatric_first_aid01.webp","Adult Social Care Certificate":"assets/img/stock_photos/05_COURSE_THUMBNAILS/adult_social_care_certificate01.webp","Epilepsy & Emergency Medication":"assets/img/stock_photos/05_COURSE_THUMBNAILS/epilepsy01.webp"};if(t[e.title])return t[e.title];return"assets/img/stock_photos/05_COURSE_THUMBNAILS/emergency_first_aid04.webp"}(e),n=function(e){if(!r(e))return"";const t=e.split("/"),n=t.pop(),a=t.join("/"),o=n.match(/^(.+?)\.(webp|jpg|png)$/);if(!o)return"";const i=o[1],s=o[2];return`${a}/${i}-400w.${s} 400w, ${a}/${i}-800w.${s} 800w, ${a}/${i}-1200w.${s} 1200w, ${a}/${i}-1600w.${s} 1600w`}(t),a=function(e){if(!r(e))return e;const t=e.split("/"),n=t.pop(),a=t.join("/"),o=n.match(/^(.+?)\.(webp|jpg|png)$/);return o?`${a}/${o[1]}-400w.${o[2]}`:e}(t),o=function(e){try{const t=new Date(e),n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],a=t.getDate(),o=n[t.getMonth()];return`${r}, ${a} ${o} ${t.getFullYear()}`}catch(t){return function(e){try{return new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}catch(t){return e}}(e)}}(e.date),i=`event-detail.html?id=${function(e){const t=e.date||"";if(!t)return console.warn("Event missing date:",e),`${e.title||"course"}-unknown`.toLowerCase().replace(/[^a-z0-9]+/g,"-");return`${e.title}-${t}`.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}(e)}`,s=(e.location||"Maidstone, Kent").replace(/Maidstone Studios/g,"The Maidstone Studios"),c=e.price||"£62",d=void 0!==e.spotsLeft?e.spotsLeft:12,l=d<5,u=function(e){const t=e.topicCategories&&e.topicCategories.length>0?e.topicCategories[0]:e.category||e.categoryName||"";if(!t)return"default";const n=window.CourseDataManager&&"function"==typeof window.CourseDataManager.topicCategoryToKey?window.CourseDataManager.topicCategoryToKey(t):t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");return{"core-care-skills":"core-care","emergency-first-aid":"first-aid","medication-management":"medication","safety-compliance":"manual-handling","health-conditions-specialist-care":"specialist-care"}[n]||"default"}(e),p=e.topicCategories&&e.topicCategories.length>0?(()=>{const t=e.topicCategories[0];if(window.CourseDataManager){const e=window.CourseDataManager.topicCategoryToKey(t),n=window.CourseDataManager.getCategoryConfig().find((t=>t.key===e));return n?.shortName||n?.title||t}return t})():e.categoryName||e.category||"Course",g=e.duration||"1 Day";return`\n        <article class="event-card event-card-${u}" onclick="window.location.href='${i}'" style="cursor: pointer;" tabindex="0" role="button" aria-label="View details for ${e.title} on ${o}" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();window.location.href='${i}'}">\n          <div class="event-card-image-wrapper">\n            ${l?`<div class="event-card-spaces-badge">ONLY ${d} SPACES REMAINING</div>`:""}\n            <img ${n?`srcset="${n}"`:""}\n                 src="${a}"\n                 alt="${e.title}"\n                 class="event-card-image"\n                 loading="lazy"\n                 ${n?'sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"':""}>\n            <div class="event-card-pills">\n              <span class="event-card-pill event-card-pill-category">${p}</span>\n              <span class="event-card-pill event-card-pill-duration">\n                <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">\n                  <circle cx="12" cy="12" r="10"></circle>\n                  <polyline points="12 6 12 12 16 14"></polyline>\n                </svg>\n                ${g}\n              </span>\n            </div>\n          </div>\n          <div class="event-card-content">\n            <div class="event-card-meta-info">\n              <div class="event-card-meta-item">\n                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">\n                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>\n                  <line x1="16" y1="2" x2="16" y2="6"></line>\n                  <line x1="8" y1="2" x2="8" y2="6"></line>\n                  <line x1="3" y1="10" x2="21" y2="10"></line>\n                </svg>\n                <time datetime="${e.date}">${o}</time>\n              </div>\n              <div class="event-card-meta-item">\n                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">\n                  <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>\n                  <circle cx="12" cy="10" r="3"></circle>\n                </svg>\n                <span>${s}</span>\n              </div>\n            </div>\n            <h3 class="event-card-title">${e.title}</h3>\n            <div class="event-card-footer">\n              <div class="event-card-price">\n                <span class="event-card-price-amount">From ${c.replace(/£/g,"").replace(/^/,"£")}</span>\n                <span class="event-card-price-label">per person</span>\n              </div>\n            </div>\n          </div>\n        </article>\n      `})).join("")}(a.slice(0,3),t)}catch(t){e&&console.error("Error loading homepage upcoming courses:",t)}}function n(e){let t;return t=window.CourseDataManager?window.CourseDataManager.mergeCourseDataForCalendar(e):{...e,location:e.location||"Maidstone, Kent",category:e.category||"Course"},t}function r(e){if(e.includes("05_COURSE_THUMBNAILS"))return!0;return!/\/\d+\.(webp|jpg|png)$/.test(e)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}();